{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"agreementCanvas\"];\nconst _c1 = [\"consentCanvas\"];\nfunction RegisterClientComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"1\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterClientComponent__svg_svg_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 14);\n    i0.ɵɵelement(1, \"polyline\", 15);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterClientComponent_section_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"section\", 16)(1, \"h2\");\n    i0.ɵɵtext(2, \"Client Agreement\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 17);\n    i0.ɵɵtext(4, \" Read the following agreement to the client. The client must provide their signature to confirm understanding and acceptance of the centre's rules and commitment to the rehabilitation program. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 18)(6, \"label\");\n    i0.ɵɵtext(7, \"Client Full Name *\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 19);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterClientComponent_section_22_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.clientName, $event) || (ctx_r1.clientName = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 20)(10, \"div\", 21);\n    i0.ɵɵtext(11, \"Agreement Terms:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 22);\n    i0.ɵɵtext(13, \" I, the undersigned, agree to abide by the rules and regulations of the Lenegewa Rehabilitation Center. I commit to participating actively in all assigned programs, attending counseling sessions, and respecting the community guidelines. I understand that violations may result in review of my participation status. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 23)(15, \"label\");\n    i0.ɵɵtext(16, \"Client Agreement Signature *\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 24)(18, \"canvas\", 25, 0);\n    i0.ɵɵlistener(\"mousedown\", function RegisterClientComponent_section_22_Template_canvas_mousedown_18_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.agStart($event));\n    })(\"mousemove\", function RegisterClientComponent_section_22_Template_canvas_mousemove_18_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.agDraw($event));\n    })(\"mouseup\", function RegisterClientComponent_section_22_Template_canvas_mouseup_18_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.agStop());\n    })(\"mouseleave\", function RegisterClientComponent_section_22_Template_canvas_mouseleave_18_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.agStop());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"div\", 26)(21, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function RegisterClientComponent_section_22_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.agClear());\n    });\n    i0.ɵɵtext(22, \"Clear\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function RegisterClientComponent_section_22_Template_button_click_23_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.confirmAgreement());\n    });\n    i0.ɵɵtext(24, \" Confirm Signature \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.clientName);\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.clientName.trim() || !ctx_r1.hasSig);\n  }\n}\nfunction RegisterClientComponent_section_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"section\", 16)(1, \"h2\");\n    i0.ɵɵtext(2, \"Data Consent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 17);\n    i0.ɵɵtext(4, \" Inform the client of how their personal data will be collected, stored, and used. The client must sign below to confirm their consent to data processing in accordance with the programme's privacy policy. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 20)(6, \"div\", 21);\n    i0.ɵɵtext(7, \"Data Use Terms:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 22);\n    i0.ɵɵtext(9, \" I consent to the Lenegewa Rehabilitation Center collecting and storing my personal information, including health and case management records, for the purpose of providing rehabilitation services and programme reporting. I understand that my data will be kept confidential and will not be shared with third parties without my explicit consent, except where required by law. I have the right to request access to, correction of, or deletion of my personal data at any time. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 23)(11, \"label\");\n    i0.ɵɵtext(12, \"Data Consent Signature *\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 24)(14, \"canvas\", 25, 1);\n    i0.ɵɵlistener(\"mousedown\", function RegisterClientComponent_section_23_Template_canvas_mousedown_14_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.csStart($event));\n    })(\"mousemove\", function RegisterClientComponent_section_23_Template_canvas_mousemove_14_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.csDraw($event));\n    })(\"mouseup\", function RegisterClientComponent_section_23_Template_canvas_mouseup_14_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.csStop());\n    })(\"mouseleave\", function RegisterClientComponent_section_23_Template_canvas_mouseleave_14_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.csStop());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"div\", 26)(17, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function RegisterClientComponent_section_23_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.csClear());\n    });\n    i0.ɵɵtext(18, \"Clear\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function RegisterClientComponent_section_23_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.confirmConsent());\n    });\n    i0.ɵɵtext(20, \" Confirm & Continue \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(19);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.hasConsentSig);\n  }\n}\nexport let RegisterClientComponent = /*#__PURE__*/(() => {\n  class RegisterClientComponent {\n    constructor(location, router) {\n      this.location = location;\n      this.router = router;\n      this.step = 1;\n      this.clientName = '';\n      this.agDrawing = false;\n      this.hasSig = false;\n      this.csDrawing = false;\n      this.hasConsentSig = false;\n    }\n    ngAfterViewInit() {\n      this.initCanvas(this.agreementCanvas, ctx => this.agCtx = ctx);\n    }\n    // ── Agreement ──────────────────────────────────────────────────────────────\n    agStart(e) {\n      this.agDrawing = true;\n      this.agCtx.beginPath();\n      this.agCtx.moveTo(e.offsetX, e.offsetY);\n    }\n    agDraw(e) {\n      if (!this.agDrawing) return;\n      this.hasSig = true;\n      this.agCtx.lineTo(e.offsetX, e.offsetY);\n      this.agCtx.stroke();\n    }\n    agStop() {\n      this.agDrawing = false;\n    }\n    agClear() {\n      const c = this.agreementCanvas.nativeElement;\n      this.agCtx.clearRect(0, 0, c.width, c.height);\n      this.hasSig = false;\n    }\n    confirmAgreement() {\n      if (!this.clientName.trim() || !this.hasSig) return;\n      this.step = 2;\n      setTimeout(() => {\n        this.initCanvas(this.consentCanvas, ctx => this.csCtx = ctx);\n      }, 0);\n    }\n    // ── Data Consent ───────────────────────────────────────────────────────────\n    csStart(e) {\n      this.csDrawing = true;\n      this.csCtx.beginPath();\n      this.csCtx.moveTo(e.offsetX, e.offsetY);\n    }\n    csDraw(e) {\n      if (!this.csDrawing) return;\n      this.hasConsentSig = true;\n      this.csCtx.lineTo(e.offsetX, e.offsetY);\n      this.csCtx.stroke();\n    }\n    csStop() {\n      this.csDrawing = false;\n    }\n    csClear() {\n      const c = this.consentCanvas.nativeElement;\n      this.csCtx.clearRect(0, 0, c.width, c.height);\n      this.hasConsentSig = false;\n    }\n    confirmConsent() {\n      if (!this.hasConsentSig) return;\n      this.router.navigate(['/clients', 'new', 'intake']);\n    }\n    // ── Shared ─────────────────────────────────────────────────────────────────\n    goBack() {\n      if (this.step === 2) {\n        this.step = 1;\n      } else {\n        this.location.back();\n      }\n    }\n    initCanvas(ref, assign) {\n      const canvas = ref.nativeElement;\n      canvas.width = canvas.offsetWidth;\n      canvas.height = canvas.offsetHeight;\n      const ctx = canvas.getContext('2d');\n      ctx.strokeStyle = '#1e293b';\n      ctx.lineWidth = 2;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n      assign(ctx);\n    }\n    static {\n      this.ɵfac = function RegisterClientComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RegisterClientComponent)(i0.ɵɵdirectiveInject(i1.Location), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RegisterClientComponent,\n        selectors: [[\"app-register-client\"]],\n        viewQuery: function RegisterClientComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n            i0.ɵɵviewQuery(_c1, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.agreementCanvas = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.consentCanvas = _t.first);\n          }\n        },\n        decls: 24,\n        vars: 18,\n        consts: [[\"agreementCanvas\", \"\"], [\"consentCanvas\", \"\"], [1, \"page-header\"], [1, \"back-btn\", 3, \"click\"], [\"width\", \"18\", \"height\", \"18\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"points\", \"15 18 9 12 15 6\"], [1, \"subtitle\"], [1, \"step-indicator\"], [1, \"step-dot\"], [4, \"ngIf\"], [\"width\", \"11\", \"height\", \"11\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"3\", 4, \"ngIf\"], [1, \"step-line\"], [1, \"step-labels\"], [\"class\", \"card agreement-card\", 4, \"ngIf\"], [\"width\", \"11\", \"height\", \"11\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"3\"], [\"points\", \"20 6 9 17 4 12\"], [1, \"card\", \"agreement-card\"], [1, \"form-desc\"], [1, \"form-field\"], [\"type\", \"text\", \"name\", \"clientName\", \"placeholder\", \"Enter client's full name\", 3, \"ngModelChange\", \"ngModel\"], [1, \"terms-box\"], [1, \"terms-label\"], [1, \"terms-text\"], [1, \"form-field\", \"sig-field\"], [1, \"sig-canvas-wrap\"], [1, \"sig-canvas\", 3, \"mousedown\", \"mousemove\", \"mouseup\", \"mouseleave\"], [1, \"sig-actions\"], [\"type\", \"button\", 1, \"secondary-btn\", 3, \"click\"], [\"type\", \"button\", 1, \"primary-btn\", 3, \"click\", \"disabled\"]],\n        template: function RegisterClientComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function RegisterClientComponent_Template_button_click_1_listener() {\n              return ctx.goBack();\n            });\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(2, \"svg\", 4);\n            i0.ɵɵelement(3, \"polyline\", 5);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(4, \"div\")(5, \"h1\");\n            i0.ɵɵtext(6, \"Register New Client\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"p\", 6);\n            i0.ɵɵtext(8, \"Complete the agreement and consent forms\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(9, \"div\", 7)(10, \"div\", 8);\n            i0.ɵɵtemplate(11, RegisterClientComponent_span_11_Template, 2, 0, \"span\", 9)(12, RegisterClientComponent__svg_svg_12_Template, 2, 0, \"svg\", 10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(13, \"div\", 11);\n            i0.ɵɵelementStart(14, \"div\", 8)(15, \"span\");\n            i0.ɵɵtext(16, \"2\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"div\", 12)(18, \"span\");\n            i0.ɵɵtext(19, \"Client Agreement\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"span\");\n            i0.ɵɵtext(21, \"Data Consent\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(22, RegisterClientComponent_section_22_Template, 25, 2, \"section\", 13)(23, RegisterClientComponent_section_23_Template, 21, 1, \"section\", 13);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵclassProp(\"active\", ctx.step === 1)(\"done\", ctx.step > 1);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.step <= 1);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.step > 1);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"done\", ctx.step > 1);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.step === 2);\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"active\", ctx.step === 1)(\"done\", ctx.step > 1);\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassProp(\"active\", ctx.step === 2);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.step === 1);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.step === 2);\n          }\n        },\n        dependencies: [CommonModule, i1.NgIf, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n        styles: [\"@charset \\\"UTF-8\\\";.page-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;margin-bottom:1rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.15rem}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:.15rem 0 0;font-size:.84rem;color:var(--text-muted)}.step-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;max-width:580px;margin-bottom:1.25rem;position:relative}.step-dot[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;border:2px solid var(--border-subtle);background:#fff;display:flex;align-items:center;justify-content:center;font-size:.78rem;font-weight:600;color:var(--text-muted);flex-shrink:0;z-index:1;transition:border-color .2s,background .2s,color .2s}.step-dot.active[_ngcontent-%COMP%], .step-dot.done[_ngcontent-%COMP%]{border-color:var(--primary-color);background:var(--primary-color);color:#fff}.step-line[_ngcontent-%COMP%]{flex:1;height:2px;background:var(--border-subtle);margin:0 .4rem;transition:background .2s}.step-line.done[_ngcontent-%COMP%]{background:var(--primary-color)}.step-labels[_ngcontent-%COMP%]{position:absolute;bottom:-1.3rem;left:0;right:0;display:flex;justify-content:space-between;font-size:.72rem;color:var(--text-muted)}.step-labels[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600}.step-labels[_ngcontent-%COMP%]   span.done[_ngcontent-%COMP%]{color:var(--primary-color)}.agreement-card[_ngcontent-%COMP%]{max-width:580px;margin-top:1.75rem}.agreement-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:1rem;font-weight:600}.form-desc[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-muted);line-height:1.55;margin:0 0 1.25rem}.terms-box[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid var(--border-subtle);border-radius:10px;padding:1rem 1.1rem;margin-bottom:1.25rem}.terms-label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#374151;margin-bottom:.45rem}.terms-text[_ngcontent-%COMP%]{font-size:.84rem;color:#4b5563;line-height:1.6;margin:0}.sig-field[_ngcontent-%COMP%]{margin-bottom:0}.sig-canvas-wrap[_ngcontent-%COMP%]{border:1.5px dashed var(--border-subtle);border-radius:10px;background:#fff;overflow:hidden;height:130px;cursor:crosshair}.sig-canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}.sig-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.25rem}.secondary-btn[_ngcontent-%COMP%]{border:1.5px solid var(--border-subtle);background:#fff;border-radius:10px;padding:.6rem 1.25rem;font-size:.875rem;font-family:inherit;cursor:pointer;color:#374151;transition:border-color .15s,background .15s}.secondary-btn[_ngcontent-%COMP%]:hover{border-color:#94a3b8;background:#f9fafb}\"]\n      });\n    }\n  }\n  return RegisterClientComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}